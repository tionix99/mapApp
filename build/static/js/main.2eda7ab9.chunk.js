(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{11:function(e,t,n){e.exports=n(26)},12:function(e,t,n){},13:function(e,t,n){},25:function(e,t,n){},26:function(e,t,n){"use strict";n.r(t);n(12),n(13);var a,o,r,s=n(0),i=n.n(s),l=n(10),c=n.n(l),u=n(6),p=n.n(u);n(19),n(20);function m(e,t){a.setCenter(e,t)}function h(){o.style.height=r.clientHeight-o.offsetTop+"px",a.container.fitToViewport()}function d(e,t){if(t){if(1===e.length)return void m(e[0]);if(e.sort(function(e,t){return e[1]-t[1]}),e.length>2){for(var n=e[0][0],o=e[0][0],r=0;r<e.length;r++)n>e[r][0]?n=e[r][0]:o<e[r][0]&&(o=e[r][0]);e=[[n,e[0][1]],[o,e[e.length-1][1]]]}var s=ymaps.util.bounds.getCenterAndZoom(e,a.container.getSize());m(s.center,s.zoom)}}var f=n(1),v=n(2),b=n(4),g=n(3),O=n(5);n(25);var C={set:function(e){return this.props.setting===e.lbl?(this.props.info&&(this.props.info.defval=e.label),"btn ON"):"btn"},on:function(){return"btn ON"},off:function(){return"btn"}},k=function(e){function t(e){var n;return Object(f.a)(this,t),(n=Object(b.a)(this,Object(g.a)(t).call(this,e))).btnClass=C[e.status],n.onClick=function(e){if(e.target.classList.contains("btn")){var t=e.target,a=n.props.buttons[e.target.value];if("select"===n.props.mode){for(var o=t.parentElement.children,r=0;r<o.length;r++)o[r].classList.remove("ON");t.classList.add("ON")}else t.classList.toggle("ON");n.props.info&&(n.props.info.el.current.textContent=a.label),n.props.extClick&&n.props.extClick(a,e.target)}},n}return Object(O.a)(t,e),Object(v.a)(t,[{key:"shouldComponentUpdate",value:function(){return!1}},{key:"render",value:function(){var e=this;return i.a.createElement("ul",{className:this.props.className,onClick:this.onClick},this.props.buttons.map(function(t,n){return i.a.createElement("li",{key:n,value:n,className:e.btnClass(t),title:t.title},t.label)}))}}]),t}(s.Component);var j=function(e){function t(e){var n;return Object(f.a)(this,t),(n=Object(b.a)(this,Object(g.a)(t).call(this,e))).state={val:0},n.onKeyDown=function(e){e.preventDefault()},n.onChange=function(e){n.setState({val:Number(e.target.value)})},n.onMouseUp=function(){n.props.path[n.props.index]=n.state.val,n.props.evInputCoords()},n.state.val=n.props.path[n.props.index],n.value=n.props.path[n.props.index],n}return Object(O.a)(t,e),Object(v.a)(t,[{key:"shouldComponentUpdate",value:function(e,t){return this.state.val!==t.val?(this.value=t.val,!0):(this.value!==e.path[this.props.index]&&(this.value=e.path[this.props.index]),!0)}},{key:"render",value:function(){return i.a.createElement("input",{type:"number",value:this.value,min:this.props.min,max:this.props.max,step:this.props.step,onChange:this.onChange,onKeyDown:this.onKeyDown,onMouseUp:this.onMouseUp})}}]),t}(s.Component),y=function(e){function t(e){var n;return Object(f.a)(this,t),(n=Object(b.a)(this,Object(g.a)(t).call(this,e))).evInputCoords=n.props.evInputCoords.bind(!1,n.props.placemark),n.evDeletePlacemark=n.props.evDeletePlacemark.bind(!1,n.props.placemark),n}return Object(O.a)(t,e),Object(v.a)(t,[{key:"render",value:function(){return i.a.createElement("ul",{className:"str"},i.a.createElement("li",null,i.a.createElement("label",null,"\u041a\u043e\u043e\u0440\u0434\u0438\u043d\u0430\u0442\u044b ",this.props.placemark.name,":")),i.a.createElement("li",null,i.a.createElement("label",null,"\u0428\u0438\u0440\u043e\u0442\u0430:"),i.a.createElement(j,{min:-89,max:89,step:this.props.step,path:this.props.placemark.latitude,index:0,evInputCoords:this.evInputCoords}),this.props.formatSet.units[0],i.a.createElement(j,{min:this.props.formatSet.min2,max:this.props.formatSet.max2,step:this.props.step,path:this.props.placemark.latitude,index:1,evInputCoords:this.evInputCoords}),this.props.formatSet.units[1]),i.a.createElement("li",null,i.a.createElement("label",null,"\u0414\u043e\u043b\u0433\u043e\u0442\u0430:"),i.a.createElement(j,{min:-179,max:179,step:this.props.step,path:this.props.placemark.longitude,index:0,evInputCoords:this.evInputCoords}),this.props.formatSet.units[0],i.a.createElement(j,{min:this.props.formatSet.min2,max:this.props.formatSet.max2,step:this.props.step,path:this.props.placemark.longitude,index:1,evInputCoords:this.evInputCoords}),this.props.formatSet.units[1],i.a.createElement("button",{onClick:this.evDeletePlacemark},"X")))}}]),t}(s.Component),E=function(e){function t(e){var n;return Object(f.a)(this,t),(n=Object(b.a)(this,Object(g.a)(t).call(this,e))).inputs=0,n.renderFunc=function(e){var t=[];for(var a in e)t.push(i.a.createElement(y,{key:a,placemark:e[a],formatSet:n.props.formatSet,step:n.props.step,evInputCoords:n.props.evInputCoords,evDeletePlacemark:n.props.evDeletePlacemark}));return t},n}return Object(O.a)(t,e),Object(v.a)(t,[{key:"componentDidUpdate",value:function(){this.inputs!==Object.keys(this.props.placemarkStore).length&&(h(),this.inputs=Object.keys(this.props.placemarkStore).length)}},{key:"render",value:function(){return i.a.createElement("ul",null,this.renderFunc(this.props.placemarkStore))}}]),t}(s.Component);var D=function(e){function t(e){var n;return Object(f.a)(this,t),(n=Object(b.a)(this,Object(g.a)(t).call(this,e))).routes=0,n.renderFunc=function(e){return 0===e.length?i.a.createElement("li",null,"\u041c\u0430\u0440\u0448\u0440\u0443\u0442 \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d"):e.map(function(e,t){return i.a.createElement("li",{key:t},"\u041c\u0430\u0440\u0448\u0440\u0443\u0442 ",t+1,": ",e)})},n}return Object(O.a)(t,e),Object(v.a)(t,[{key:"componentDidUpdate",value:function(){this.routes!==this.props.multiDistance.length&&(h(),this.routes=this.props.multiDistance.length)}},{key:"render",value:function(){return i.a.createElement("ul",null,i.a.createElement("li",null,"\u041c\u0438\u043d\u0438\u043c\u0430\u043b\u044c\u043d\u043e\u0435 \u0440\u0430\u0441\u0441\u0442\u043e\u044f\u043d\u0438\u0435: ",this.props.shortDistance," \u043a\u043c."),this.renderFunc(this.props.multiDistance))}}]),t}(s.Component);var x=[{lbl:"gr_dec",label:"dec 00.00\xb0",title:"\u0432 \u0433\u0440\u0430\u0434\u0443\u0441\u0430\u0445 \xb0 \u0432 \u0432\u0438\u0434\u0435 \u0434\u0435\u0441\u044f\u0442\u0438\u0447\u043d\u043e\u0439 \u0434\u0440\u043e\u0431\u0438"},{lbl:"gr_min",label:"min 00\xb000'",title:"\u0432 \u0433\u0440\u0430\u0434\u0443\u0441\u0430\u0445 \xb0 \u0438  \u043c\u0438\u043d\u0443\u0442\u0430\u0445 '"}],N=[{lbl:1,label:"x01"},{lbl:5,label:"x05"},{lbl:10,label:"x10"},{lbl:15,label:"x15"},{lbl:20,label:"x20"}],S=function(e){function t(e){var n;return Object(f.a)(this,t),(n=Object(b.a)(this,Object(g.a)(t).call(this,e))).selectInfo={el:i.a.createRef(),defval:""},n}return Object(O.a)(t,e),Object(v.a)(t,[{key:"shouldComponentUpdate",value:function(){return!1}},{key:"componentDidMount",value:function(){this.selectInfo.el.current.textContent=this.selectInfo.defval}},{key:"render",value:function(){return i.a.createElement("li",{className:"downdrop"},i.a.createElement("label",null,"\u25bc",this.props.label,":"),i.a.createElement("a",{ref:this.selectInfo.el},"..."),i.a.createElement(k,{className:"submenu",mode:"select",status:"set",setting:this.props.setting,info:this.selectInfo,buttons:this.props.buttons,extClick:this.props.extClick}))}}]),t}(s.Component),w={gr_dec:{units:[".","\xb0"],min2:0,max2:99,convertToDEC:function(e){return e},convertVal:function(e){e[1]=Math.round(e[1]/.6)}},gr_min:{units:["\xb0","'"],min2:0,max2:59,convertToDEC:function(e){return[e[0],Math.round(e[1]/.6)]},convertVal:function(e){e[1]=Math.round(.6*e[1])}}};function I(e){return Math.round(100*e)/100}function P(e){return e[0]<0?I(e[0]-e[1]/100):I(e[0]+e[1]/100)}function z(e){var t=Math.abs(Math.round(e%1*100));return[Math.trunc(e),t>99?99:t]}function M(){var e=[];for(var t in L)e.push(L[t].coords);return e}var R="ABCDE",L={},T=function(e){function t(e){var n;return Object(f.a)(this,t),(n=Object(b.a)(this,Object(g.a)(t).call(this,e))).state={format:x[0].lbl,step:1,update:Date.now()},n.formatSet=w[n.state.format],n.shortDistance=0,n.multiDistance=[],n.autozoomON="ON",n.routeON="",n.changeFormat=function(e,t){w[e].convertVal(t.latitude),w[e].convertVal(t.longitude)},n.coordsToArr=function(e){e.latitude=z(e.coords[0]),e.longitude=z(e.coords[1]),"gr_min"===n.state.format&&n.changeFormat("gr_min",e)},n.changePolyline=function(){var e=M();return n.polyline.geometry.setCoordinates(e),n.shortDistance=function(e){if(e.length<2)return 0;for(var t=0,n=0,a=1;a<e.length;)t+=(o=e[n],r=e[a],ymaps.coordSystem.geo.getDistance(o,r)),n++,a++;return t=I(t/1e3);var o,r}(e),e},n.evAutozoomClick=function(e){e.target.classList.contains("ON")?(n.autozoomON="",e.target.classList.remove("ON")):(n.autozoomON="ON",e.target.classList.add("ON"))},n.evRouteClick=function(e){e.target.classList.contains("ON")?(n.routeON="",e.target.classList.remove("ON"),n.multiRoute.model.setReferencePoints([])):(n.routeON="ON",e.target.classList.add("ON"),n.multiRoute.model.setReferencePoints(M()))},n.evClickFormat=function(e){if(n.state.format!==e.lbl){for(var t in n.formatSet=w[e.lbl],L)n.changeFormat(e.lbl,L[t]);n.setState({format:e.lbl})}},n.evClickStep=function(e){n.state.step!==e.lbl&&n.setState({step:e.lbl})},n.evCreatePlacemark=function(e){if(Object.keys(L).length>=R.length)alert("\u041c\u0430\u043a\u0441\u0438\u043c\u0430\u043b\u044c\u043d\u043e\u0435 \u043a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e \u0442\u043e\u0447\u0435\u043a: "+R.length);else{for(var t={},o=0;o<R.length;o++)if(!L[R[o]]){t.name=R[o];break}L[t.name]=t,t.coords=e.get("coords"),t.geoObj=function(e,t){var n=new ymaps.Placemark(t,{iconContent:e,hintContent:"\u041a\u043e\u043e\u0440\u0434\u0438\u043d\u0430\u0442\u044b: "+t},{draggable:!0});return a.geoObjects.add(n),n}(t.name,t.coords),t.geoObj.properties.set({hintContent:"\u041a\u043e\u043e\u0440\u0434\u0438\u043d\u0430\u0442\u044b: "+t.coords}),n.coordsToArr(t),n.changePolyline(),t.geoObj.events.add("contextmenu",n.evDeletePlacemark.bind(!1,t)),t.geoObj.events.add("dragend",function(){t.coords=t.geoObj.geometry.getCoordinates(),n.coordsToArr(t);var e=n.changePolyline();e.length>1&&d(e,"ON"===n.autozoomON),n.setState({update:Date.now()})}),n.setState({update:Date.now()})}},n.evDeletePlacemark=function(e){var t;t=e.geoObj,a.geoObjects.remove(t),delete L[e.name],n.changePolyline(),n.setState({update:Date.now()})},n.evInputCoords=function(e){var t,a;e.coords[0]=P(n.formatSet.convertToDEC(e.latitude)),e.coords[1]=P(n.formatSet.convertToDEC(e.longitude)),t=e.geoObj,a=e.coords,t.geometry.setCoordinates(a),t.properties.set({hintContent:"\u041a\u043e\u043e\u0440\u0434\u0438\u043d\u0430\u0442\u044b: "+a}),e.geoObj.properties.set({hintContent:"\u041a\u043e\u043e\u0440\u0434\u0438\u043d\u0430\u0442\u044b: "+e.coords}),d(n.changePolyline(),"ON"===n.autozoomON),n.setState({update:Date.now()})},a.events.add("click",n.evCreatePlacemark),n.polyline=function(e){var t=new ymaps.Polyline(e,{},{});return a.geoObjects.add(t),t}([]),n.multiRoute=function(e){var t=new ymaps.multiRouter.MultiRoute({referencePoints:e},{editorMidPointsType:"via",editorDrawOver:!1});return a.geoObjects.add(t),t}([]),n.multiRoute.model.events.add("requestsuccess",function(){n.multiDistance=function(e){for(var t=e.model.getRoutes(),n=[],a=0;a<t.length;a++)n.push(t[a].properties.get("distance").text);return n}(n.multiRoute),n.setState({update:Date.now()})}).add("requestfail",function(e){this.multiDistance=[],this.setState({update:Date.now()}),console.log("\u041e\u0448\u0438\u0431\u043a\u0430: "+e.get("error").message)}),n}return Object(O.a)(t,e),Object(v.a)(t,[{key:"render",value:function(){return i.a.createElement("div",null,i.a.createElement("ul",{className:"str"},i.a.createElement("li",null,i.a.createElement("button",{className:this.autozoomON,onClick:this.evAutozoomClick},"\u0430\u0432\u0442\u043e\u0437\u0443\u043c"),i.a.createElement("button",{className:this.routeON,onClick:this.evRouteClick},"\u043c\u0430\u0440\u0448\u0440\u0443\u0442")),i.a.createElement(S,{label:"\u0444\u043e\u0440\u043c\u0430\u0442",buttons:x,setting:this.state.format,extClick:this.evClickFormat}),i.a.createElement(S,{label:"\u0448\u0430\u0433",buttons:N,setting:this.state.step,extClick:this.evClickStep})),i.a.createElement(E,{placemarkStore:L,formatSet:this.formatSet,step:this.state.step,evInputCoords:this.evInputCoords,evDeletePlacemark:this.evDeletePlacemark}),i.a.createElement(D,{shortDistance:this.shortDistance,multiDistance:this.multiDistance}))}}]),t}(i.a.Component);var F=function(){return i.a.createElement("div",null,i.a.createElement(T,null))},U=document.getElementById("app-container"),A=document.createElement("div");A.id="map-conteiner",ymaps.ready(function(){r=U,o=A,(a=new ymaps.Map(o,{center:[57,33],zoom:5,controls:["typeSelector"]})).controls.add("zoomControl",{size:"large",position:{right:"5px",top:"44px"},zoomStep:1}),c.a.render(i.a.createElement("div",{id:"main-window"},i.a.createElement(F,null),i.a.createElement("div",{id:"map-container"})),U,function(){p()(U).resizable({minWidth:240,minHeight:240,stop:function(){h()}}),p()("#map-container").replaceWith(A),h()})})}},[[11,1,2]]]);
//# sourceMappingURL=main.2eda7ab9.chunk.js.map