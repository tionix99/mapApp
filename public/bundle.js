!function(e){var t={};function n(o){if(t[o])return t[o].exports;var r=t[o]={i:o,l:!1,exports:{}};return e[o].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.m=e,n.c=t,n.d=function(e,t,o){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(o,r,function(t){return e[t]}.bind(null,r));return o},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="/public/",n(n.s=1)}([function(e,t,n){"use strict";var o,r,a;function i(e,t){o.setCenter(e,t)}Object.defineProperty(t,"__esModule",{value:!0}),t.thisMap=o,t.initMap=function(e,n){a=n,r=e,t.thisMap=o=new ymaps.Map(r,{center:[57,33],zoom:5,controls:["typeSelector"]}),o.controls.add("zoomControl",{size:"large",position:{right:"5px",top:"44px"},zoomStep:1})},t.mapSetCenter=i,t.mapFitToViewport=function(){r.style.height=a.clientHeight-r.offsetTop+"px",o.container.fitToViewport()},t.mapSetCenterAndZoom=function(e,t){if(t){if(1===e.length)return void i(e[0]);if(e.sort(function(e,t){return e[1]-t[1]}),e.length>2){for(var n=e[0][0],r=e[0][0],a=0;a<e.length;a++)n>e[a][0]?n=e[a][0]:r<e[a][0]&&(r=e[a][0]);e=[[n,e[0][1]],[r,e[e.length-1][1]]]}var l=ymaps.util.bounds.getCenterAndZoom(e,o.container.getSize());i(l.center,l.zoom)}},t.addPlacemark=function(e,t){var n=new ymaps.Placemark(t,{iconContent:e,hintContent:"Координаты: "+t},{draggable:!0});return o.geoObjects.add(n),n},t.movePlacemark=function(e,t){e.geometry.setCoordinates(t),e.properties.set({hintContent:"Координаты: "+t})},t.addPolyline=function(e){var t=new ymaps.Polyline(e,{},{});return o.geoObjects.add(t),t},t.addMultiRoute=function(e){var t=new ymaps.multiRouter.MultiRoute({referencePoints:e},{editorMidPointsType:"via",editorDrawOver:!1});return o.geoObjects.add(t),t},t.getDistance=function(e,t){return ymaps.coordSystem.geo.getDistance(e,t)},t.getMultiRouteDistance=function(e){for(var t=e.model.getRoutes(),n=[],o=0;o<t.length;o++)n.push(t[o].properties.get("distance").text);return n},t.removeGeoObject=function(e){o.geoObjects.remove(e)}},function(e,t,n){"use strict";var o,r=n(0),a=n(2),i=(o=a)&&o.__esModule?o:{default:o};var l=document.getElementById("app-container"),s=document.createElement("div");s.id="map-conteiner",ymaps.ready(function(){(0,r.initMap)(s,l),ReactDOM.render(React.createElement("div",{id:"main-window"},React.createElement(i.default,null),React.createElement("div",{id:"map-container"})),l,function(){$(l).resizable({minWidth:240,minHeight:240,stop:function(){(0,r.mapFitToViewport)()}}),$("#map-container").replaceWith(s),(0,r.mapFitToViewport)()})})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o,r=n(3),a=(o=r)&&o.__esModule?o:{default:o};t.default=function(){return React.createElement("div",null,React.createElement(a.default,null))}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),r=n(0),a=s(n(4)),i=s(n(5)),l=s(n(6));function s(e){return e&&e.__esModule?e:{default:e}}function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function p(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var f=[{lbl:"gr_dec",label:"dec 00.00°",title:"в градусах ° в виде десятичной дроби"},{lbl:"gr_min",label:"min 00°00'",title:"в градусах ° и  минутах '"}],m=[{lbl:1,label:"x01"},{lbl:5,label:"x05"},{lbl:10,label:"x10"},{lbl:15,label:"x15"},{lbl:20,label:"x20"}],d=function(e){function t(e){c(this,t);var n=u(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.selectInfo=React.createRef(),n}return p(t,React.Component),o(t,[{key:"shouldComponentUpdate",value:function(){}},{key:"componentDidMount",value:function(){this.selectInfo.current.textContent=this.selectInfo.defval}},{key:"render",value:function(){return React.createElement("li",{class:"downdrop"},React.createElement("label",null,"▼",this.props.label,":"),React.createElement("a",{ref:this.selectInfo},"..."),React.createElement(a.default,{class:"submenu",mode:"select",status:"set",setting:this.props.setting,info:this.selectInfo,buttons:this.props.buttons,extClick:this.props.extClick}))}}]),t}(),h={gr_dec:{units:[".","°"],min2:0,max2:99,convertToDEC:function(e){return e},convertVal:function(e){e[1]=Math.round(e[1]/.6)}},gr_min:{units:["°","'"],min2:0,max2:59,convertToDEC:function(e){return[e[0],Math.round(e[1]/.6)]},convertVal:function(e){e[1]=Math.round(.6*e[1])}}};function v(e){return Math.round(100*e)/100}function b(e){return e[0]<0?v(e[0]-e[1]/100):v(e[0]+e[1]/100)}function y(e){var t=Math.abs(Math.round(e%1*100));return[Math.trunc(e),t>99?99:t]}function g(){var e=[];for(var t in C)e.push(C[t].coords);return e}var O="ABCDE",C={},_=function(e){function t(e){c(this,t);var n=u(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={format:f[0].lbl,step:1,update:Date.now()},n.formatSet=h[n.state.format],n.shortDistance=0,n.multiDistance=[],n.autozoomON="ON",n.routeON="",n.changeFormat=function(e,t){h[e].convertVal(t.latitude),h[e].convertVal(t.longitude)},n.coordsToArr=function(e){e.latitude=y(e.coords[0]),e.longitude=y(e.coords[1]),"gr_min"===n.state.format&&n.changeFormat("gr_min",e)},n.changePolyline=function(){var e=g();return n.polyline.geometry.setCoordinates(e),n.shortDistance=function(e){if(e.length<2)return 0;for(var t=0,n=0,o=1;o<e.length;)t+=(0,r.getDistance)(e[n],e[o]),n++,o++;return t=v(t/1e3)}(e),e},n.evAutozoomClick=function(e){e.target.classList.contains("ON")?(n.autozoomON="",e.target.classList.remove("ON")):(n.autozoomON="ON",e.target.classList.add("ON"))},n.evRouteClick=function(e){e.target.classList.contains("ON")?(n.routeON="",e.target.classList.remove("ON"),n.multiRoute.model.setReferencePoints([])):(n.routeON="ON",e.target.classList.add("ON"),n.multiRoute.model.setReferencePoints(g()))},n.evClickFormat=function(e){if(n.state.format!==e.lbl){for(var t in n.formatSet=h[e.lbl],C)n.changeFormat(e.lbl,C[t]);n.setState({format:e.lbl})}},n.evClickStep=function(e){n.state.step!==e.lbl&&n.setState({step:e.lbl})},n.evCreatePlacemark=function(e){if(Object.keys(C).length>=O.length)alert("Максимальное количество точек: "+O.length);else{for(var t={},o=0;o<O.length;o++)if(!C[O[o]]){t.name=O[o];break}C[t.name]=t,t.coords=e.get("coords"),t.geoObj=(0,r.addPlacemark)(t.name,t.coords),t.geoObj.properties.set({hintContent:"Координаты: "+t.coords}),n.coordsToArr(t),n.changePolyline(),t.geoObj.events.add("contextmenu",n.evDeletePlacemark.bind(!1,t)),t.geoObj.events.add("dragend",function(){t.coords=t.geoObj.geometry.getCoordinates(),n.coordsToArr(t);var e=n.changePolyline();e.length>1&&(0,r.mapSetCenterAndZoom)(e,"ON"===n.autozoomON),n.setState({update:Date.now()})}),n.setState({update:Date.now()})}},n.evDeletePlacemark=function(e){(0,r.removeGeoObject)(e.geoObj),delete C[e.name],n.changePolyline(),n.setState({update:Date.now()})},n.evInputCoords=function(e){e.coords[0]=b(n.formatSet.convertToDEC(e.latitude)),e.coords[1]=b(n.formatSet.convertToDEC(e.longitude)),(0,r.movePlacemark)(e.geoObj,e.coords),e.geoObj.properties.set({hintContent:"Координаты: "+e.coords}),(0,r.mapSetCenterAndZoom)(n.changePolyline(),"ON"===n.autozoomON),n.setState({update:Date.now()})},r.thisMap.events.add("click",n.evCreatePlacemark),n.polyline=(0,r.addPolyline)([]),n.multiRoute=(0,r.addMultiRoute)([]),n.multiRoute.model.events.add("requestsuccess",function(){n.multiDistance=(0,r.getMultiRouteDistance)(n.multiRoute),n.setState({update:Date.now()})}).add("requestfail",function(e){this.multiDistance=[],this.setState({update:Date.now()}),console.log("Ошибка: "+e.get("error").message)}),n}return p(t,React.Component),o(t,[{key:"render",value:function(){return React.createElement("div",null,React.createElement("ul",{class:"str"},React.createElement("li",null,React.createElement("button",{class:this.autozoomON,onClick:this.evAutozoomClick},"автозум"),React.createElement("button",{class:this.routeON,onClick:this.evRouteClick},"маршрут")),React.createElement(d,{label:"формат",buttons:f,setting:this.state.format,extClick:this.evClickFormat}),React.createElement(d,{label:"шаг",buttons:m,setting:this.state.step,extClick:this.evClickStep})),React.createElement(i.default,{placemarkStore:C,formatSet:this.formatSet,step:this.state.step,evInputCoords:this.evInputCoords,evDeletePlacemark:this.evDeletePlacemark}),React.createElement(l.default,{shortDistance:this.shortDistance,multiDistance:this.multiDistance}))}}]),t}();t.default=_},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}();var r={set:function(e){return this.props.setting===e.lbl?(this.props.info&&(this.props.info.defval=e.label),"btn ON"):"btn"},on:function(){return"btn ON"},off:function(){return"btn"}},a=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.btnClass=r[e.status],n.onClick=function(e){if(e.target.classList.contains("btn")){var t=e.target,o=n.props.buttons[e.target.value];if("select"===n.props.mode){for(var r=t.parentElement.children,a=0;a<r.length;a++)r[a].classList.remove("ON");t.classList.add("ON")}else t.classList.toggle("ON");n.props.info&&(n.props.info.current.textContent=o.label),n.props.extClick&&n.props.extClick(o,e.target)}},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,React.Component),o(t,[{key:"shouldComponentUpdate",value:function(){}},{key:"render",value:function(){var e=this;return React.createElement("ul",{class:this.props.class,onClick:this.onClick},this.props.buttons.map(function(t,n){return React.createElement("li",{key:n,value:n,class:e.btnClass(t),title:t.title},t.label)}))}}]),t}();t.default=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),r=n(0);function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s=function(e){function t(e){a(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={val:0},n.onKeyDown=function(e){e.preventDefault()},n.onChange=function(e){n.setState({val:Number(e.target.value)})},n.onMouseUp=function(){n.props.path[n.props.index]=n.state.val,n.props.evInputCoords()},n.state.val=n.props.path[n.props.index],n.value=n.props.path[n.props.index],n}return l(t,React.Component),o(t,[{key:"shouldComponentUpdate",value:function(e,t){return this.state.val!==t.val?(this.value=t.val,!0):(this.value!==e.path[this.props.index]&&(this.value=e.path[this.props.index]),!0)}},{key:"render",value:function(){return React.createElement("input",{type:"number",value:this.value,min:this.props.min,max:this.props.max,step:this.props.step,onChange:this.onChange,onKeyDown:this.onKeyDown,onMouseUp:this.onMouseUp})}}]),t}(),c=function(e){function t(e){a(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.evInputCoords=n.props.evInputCoords.bind(!1,n.props.placemark),n.evDeletePlacemark=n.props.evDeletePlacemark.bind(!1,n.props.placemark),n}return l(t,React.Component),o(t,[{key:"render",value:function(){return React.createElement("ul",{class:"str"},React.createElement("li",null,React.createElement("label",null,"Координаты ",this.props.placemark.name,":")),React.createElement("li",null,React.createElement("label",null,"Широта:"),React.createElement(s,{min:-89,max:89,step:this.props.step,path:this.props.placemark.latitude,index:0,evInputCoords:this.evInputCoords}),this.props.formatSet.units[0],React.createElement(s,{min:this.props.formatSet.min2,max:this.props.formatSet.max2,step:this.props.step,path:this.props.placemark.latitude,index:1,evInputCoords:this.evInputCoords}),this.props.formatSet.units[1]),React.createElement("li",null,React.createElement("label",null,"Долгота:"),React.createElement(s,{min:-179,max:179,step:this.props.step,path:this.props.placemark.longitude,index:0,evInputCoords:this.evInputCoords}),this.props.formatSet.units[0],React.createElement(s,{min:this.props.formatSet.min2,max:this.props.formatSet.max2,step:this.props.step,path:this.props.placemark.longitude,index:1,evInputCoords:this.evInputCoords}),this.props.formatSet.units[1],React.createElement("button",{onClick:this.evDeletePlacemark},"X")))}}]),t}(),u=function(e){function t(e){a(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.inputs=0,n.renderFunc=function(e){var t=[];for(var o in e)t.push(React.createElement(c,{key:o,placemark:e[o],formatSet:n.props.formatSet,step:n.props.step,evInputCoords:n.props.evInputCoords,evDeletePlacemark:n.props.evDeletePlacemark}));return t},n}return l(t,React.Component),o(t,[{key:"componentDidUpdate",value:function(){this.inputs!==Object.keys(this.props.placemarkStore).length&&((0,r.mapFitToViewport)(),this.inputs=Object.keys(this.props.placemarkStore).length)}},{key:"render",value:function(){return React.createElement("ul",null,this.renderFunc(this.props.placemarkStore))}}]),t}();t.default=u},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),r=n(0);var a=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.routes=0,n.renderFunc=function(e){return 0===e.length?React.createElement("li",null,"Маршрут не найден"):e.map(function(e,t){return React.createElement("li",{key:t},"Маршрут ",t+1,": ",e)})},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,React.Component),o(t,[{key:"componentDidUpdate",value:function(){this.routes!==this.props.multiDistance.length&&((0,r.mapFitToViewport)(),this.routes=this.props.multiDistance.length)}},{key:"render",value:function(){return React.createElement("ul",null,React.createElement("li",null,"Минимальное расстояние: ",this.props.shortDistance," км."),this.renderFunc(this.props.multiDistance))}}]),t}();t.default=a}]);